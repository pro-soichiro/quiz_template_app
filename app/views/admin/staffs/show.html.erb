<h2><%= @staff.full_name %></h2>
<div>
  <canvas id="myChart"></canvas>
  <script>
    var categories = gon.categories;
    var myARates = gon.myARates;
    var myARatesMinus = gon.myARatesMinus;
    var bgc = [];
    var bdc = [];

    if (typeof myChart !== 'undefined' && myChart) {
      myChart.destroy();
    }

    var ctx = document.getElementById("myChart").getContext('2d');


   myARates.forEach(function(i){
      // 0以上25以下 pink
      if ( i >= 0 && i <= 25 ) {
        bgc.push('rgba(255,212,228,0.8)');
        bdc.push('#FF82B2');
      // 26以上70以下 orange
      } else if (i >= 26 && i <= 70) {
        bgc.push('rgba(255,235,216,0.8)');
        bdc.push('#FFAE60');
      // 71以上99以下 blue
      } else if (i >= 71 && i <= 99) {
        bgc.push('rgba(215,236,250,0.8)');
        bdc.push('#81C4F2');
      // 100 green
      } else if ( i == 100 ) {
        bgc.push('rgba(214,236,214,0.8)');
        bdc.push('#37A236');
      };
    });


    var myChart = new Chart(ctx, {
      type: 'horizontalBar',
      data: {
        labels: categories,
        datasets: [{
          label: '達成',
          data: myARates,
          backgroundColor: bgc,
          borderWidth: 1,
          borderColor: bdc
        },{
          label: '残り',
          data: myARatesMinus
        }]
      },
      options: {
        scales: {
          xAxes: [{
            scaleLabel: {
              display: true,
              labelString: '単位[%]',
            },
            ticks: {
              min: 0,
              max: 100,
              stepSize: 10
            },
            stacked: true,
          }],
          yAxes: [{
            scaleLabel: {
              display: true,
              labelString: 'カテゴリ',
            },
            stacked: true
          }]
        }
      }
    });

  </script>
  <div>
    最終ログイン日時
    <%= @staff.current_sign_in_at.strftime("%Y/%m/%d") %>
  </div>
  <div>
    正答率
    <%= @my_correct_answer_rate %>%
  </div>
</div>
<div>
  <table>
    <tbody>
      <tr>
        <td></td>
        <td><%= attachment_image_tag @staff,:image,format: "jpeg", fallback: "no-image.png",size:"100x100" %></td>
      </tr>
      <tr>
        <td>名前</td>
        <td><%=  @staff.full_name %></td>
      </tr>
      <tr>
        <td>Email</td>
        <td><%= @staff.email %></td>
      </tr>
      <tr>
        <td>ステータス(ログイン回数)</td>
        <td>
          <% if @staff.status? %>
    				<span class="text-login"><%= @staff.sign_in_count %>回</span>
    			<% else %>
  					<span class="text-invalid">退職</span>
  				<% end %>
  			</td>
      </tr>
    </tbody>
  </table>
  <%= link_to "スタッフ一覧", admin_staffs_path %>
  <% if @staff.status? %>
    <%= link_to "退職設定", admin_staff_path(@staff), :method => "PATCH" %>
  <% else %>
    <%= link_to "復職設定", admin_staff_path(@staff), :method => "PATCH" %>
  <% end %>
</div>